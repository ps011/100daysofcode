<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Text Detection</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

<form>
    <div class="input-file">
        <img id="file_upload" src="http://placehold.it/70" alt="your image" class="upload-img" />
        <div class="input-file-upload">
            <span class="upload-label">Upload Image</span>
            <input type='file' onchange="readURL(this);" />
        </div>
    </div>
</form>


<script>
    let img = document.querySelector('#file_upload');

    function readURL(input) {
        if (input.files && input.files[0]) {
            const reader = new FileReader();

            reader.onload = async function (e) {
                img.setAttribute('src', e.target.result);
                renderText(await postData(input.files[0]));
            };
            reader.readAsDataURL(input.files[0]);
        }
    }

    async function postData(image) {
       let response = await fetch('https://ps100daysofcode.herokuapp.com/day18/', {
            method: 'POST',
            body: {
                file: image
            }
        });
        response = await response.json();
        return response;

    }

    function renderText(text) {
        console.log(text);
    }

</script>
</body>
</html>
